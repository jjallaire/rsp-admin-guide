<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>RStudio Server Professional Edition</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Documentation for using GitBook and gitbook.com">
  <meta name="generator" content="GitBook 2.6.5">


<meta name="date" content="2016-01-28">


  <meta name="HandheldFriendly" content="true">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->

<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-edit.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>


<!--bookdown:title:start-->
<div id="header">
<h1 class="title">RStudio Server Professional Edition</h1>
<h3 class="subtitle"><em>Administation Guide</em></h3>
<h4 class="date"><em>2016-01-28</em></h4>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#getting-started"><span class="toc-section-number">1</span> Getting Started</a></li>
<li><a href="#server-management"><span class="toc-section-number">2</span> Server Management</a><ul>
<li><a href="#core-administrative-tasks"><span class="toc-section-number">2.1</span> Core Administrative Tasks</a><ul>
<li><a href="#configuration-files"><span class="toc-section-number">2.1.1</span> Configuration Files</a></li>
<li><a href="#stopping-and-starting"><span class="toc-section-number">2.1.2</span> Stopping and Starting</a></li>
<li><a href="#managing-active-sessions"><span class="toc-section-number">2.1.3</span> Managing Active Sessions</a></li>
<li><a href="#taking-the-server-offline"><span class="toc-section-number">2.1.4</span> Taking the Server Offline</a></li>
<li><a href="#upgrading-to-a-new-version"><span class="toc-section-number">2.1.5</span> Upgrading to a New Version</a></li>
</ul></li>
<li><a href="#administrative-dashboard"><span class="toc-section-number">2.2</span> Administrative Dashboard</a><ul>
<li><a href="#enabling-the-dashboard"><span class="toc-section-number">2.2.1</span> Enabling the Dashboard</a></li>
<li><a href="#administrator-superusers"><span class="toc-section-number">2.2.2</span> Administrator Superusers</a></li>
</ul></li>
</ul></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RStudio Server Professional Edition</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="getting-started" class="section level1">
<h1><span class="header-section-number">1</span> Getting Started</h1>
<p>RStudio Server enables you to provide a browser based interface (the RStudio IDE) to a version of R running on a remote Linux server. Deploying R and RStudio on a server has a number of benefits, including:</p>
<ul>
<li>The ability to access R sessions from any computer in any location;</li>
<li>Easy sharing of code, data, and other files with colleagues;</li>
<li>Allowing multiple users to share access to the more powerful compute resources (memory, processors, etc.) available on a well equipped server; and</li>
<li>Centralized installation and configuration of R, R packages, TeX, and other supporting libraries.</li>
</ul>
<p>This manual describes <em>RStudio Server Professional Edition</em>, which adds many enhancements to the open-source version of RStudio Server, including:</p>
<ul>
<li>The ability to run multiple concurrent R sessions per-user.</li>
<li>Flexible use of multiple versions of R on the same server.</li>
<li>Project sharing for easy collaboration within workgroups.</li>
<li>Load balancing for increased capacity and higher availability.</li>
<li>An administrative dashboard that provides insight into active sessions, server health, and monitoring of system-wide and per-user performance and resource metrics;</li>
<li>Authentication using system accounts, ActiveDirectory, LDAP, or Google Accounts;</li>
<li>Full support for PAM (including PAM sessions for dynamically provisioning user resources);</li>
<li>Ability to establish per-user or per-group CPU priorities and memory limits;</li>
<li>HTTP enhancements including support for SSL and keep-alive for improved performance;</li>
<li>Ability to restrict access to the server by IP;</li>
<li>Customizable server health checks; and</li>
<li>Suspend, terminate, or assume control of user sessions; Impersonate users for assistance and troubleshooting.</li>
</ul>
<!--chapter:end:index-->
</div>
<div id="server-management" class="section level1">
<h1><span class="header-section-number">2</span> Server Management</h1>
<div id="core-administrative-tasks" class="section level2">
<h2><span class="header-section-number">2.1</span> Core Administrative Tasks</h2>
<div id="configuration-files" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Configuration Files</h3>
<p>RStudio Server uses several configuration files all located within the <code>/etc/rstudio</code> directory. Configuration files include:</p>
<table>
<colgroup>
<col width="29%" />
<col width="70%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left">rserver.conf</td>
<td align="left">Core server settings</td>
</tr>
<tr class="even">
<td align="left">rsession.conf</td>
<td align="left">Settings related to individual R sessions</td>
</tr>
<tr class="odd">
<td align="left">profiles</td>
<td align="left">User and group resource limits</td>
</tr>
<tr class="even">
<td align="left">r-versions</td>
<td align="left">Manual specification of additional versions of R</td>
</tr>
<tr class="odd">
<td align="left">ip-rules</td>
<td align="left">IP access rules (allow or deny groups of IP addresses)</td>
</tr>
<tr class="even">
<td align="left">load-balancer</td>
<td align="left">Load balancing configuration</td>
</tr>
<tr class="odd">
<td align="left">health-check</td>
<td align="left">Template for content to return for server health checks</td>
</tr>
<tr class="even">
<td align="left">google-accounts</td>
<td align="left">Mappings from Google accounts to local accounts</td>
</tr>
</tbody>
</table>
<p>The <code>rserver.conf</code> and <code>rsession.conf</code> files are created by default during installation however the other config files are optional so need to be created explicitly.</p>
<p>Whenever making changes to configuration files you need to restart the server for them to take effect. You can do this using the <code>restart</code> command of the server management utility:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server restart</code></pre></div>
</div>
<div id="stopping-and-starting" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Stopping and Starting</h3>
<p>During installation RStudio Server is automatically registered as a daemon which starts along with the rest of the system. On Debian, Ubuntu, and RedHat/CentOS 6 this registration is performed using an Upstart script at <code>/etc/init/rstudio-server.conf</code>. On other systems including RedHat/CentOS 5 an init.d script is installed at <code>/etc/init.d/rstudio-server.</code></p>
<p>To manually stop, start, and restart the server you use the following commands:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server stop
$ <span class="kw">sudo</span> rstudio-server start
$ <span class="kw">sudo</span> rstudio-server restart</code></pre></div>
<p>To check the current stopped/started status of the server:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server status</code></pre></div>
</div>
<div id="managing-active-sessions" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Managing Active Sessions</h3>
<p>There are a number of administrative commands which allow you to see what sessions are active and request suspension of running sessions.</p>
<p>To list all currently active sessions:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server active-sessions</code></pre></div>
<div id="suspending-sessions" class="section level4">
<h4><span class="header-section-number">2.1.3.1</span> Suspending Sessions</h4>
<p>When R sessions have been idle (no processing or user interaction) for a specified period of time (2 hours by default) RStudio Server suspends them to disk to free up server resources. When the user next interacts with their session it is restored from disk and the user resumes right back where they left off. This is all done seamlessly such that users aren’t typically aware that a suspend and resume has occurred.</p>
<p>To manually suspend an individual session:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server suspend-session <span class="kw">&lt;</span>pid<span class="kw">&gt;</span></code></pre></div>
<p>To manually suspend all running sessions:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server suspend-all</code></pre></div>
<p>The suspend commands also have a “force” variation which will send an interrupt to the session to request the termination of any running R command:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server force-suspend-session <span class="kw">&lt;</span>pid<span class="kw">&gt;</span>
$ <span class="kw">sudo</span> rstudio-server force-suspend-all</code></pre></div>
<p>The <code>force-suspend-all</code> command should be issued immediately prior to any reboot so as to preserve the data and state of active R sessions across the restart.</p>
</div>
<div id="killing-sessions" class="section level4">
<h4><span class="header-section-number">2.1.3.2</span> Killing Sessions</h4>
<p>If you are for any reason unable to cooperatively suspend an R session using the commands described above you may need to force kill the session. Force killing a session results in SIGKILL being sent to the process, causing an immediate termination.</p>
<p>To force kill an individual session:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server kill-session <span class="kw">&lt;</span>pid<span class="kw">&gt;</span></code></pre></div>
<p>To force kill all running sessions:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server kill-all</code></pre></div>
<p>Note that these commands should be exclusively reserved for situations where suspending doesn’t work as force killing a session can cause user data loss (e.g. unsaved source files or R workspace content).</p>
</div>
</div>
<div id="taking-the-server-offline" class="section level3">
<h3><span class="header-section-number">2.1.4</span> Taking the Server Offline</h3>
<p>If you need to perform system maintenance and want users to receive a friendly message indicating the server is offline you can issue the following command:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server offline</code></pre></div>
<p>When the server is once again available you should issue this command:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> rstudio-server online</code></pre></div>
</div>
<div id="upgrading-to-a-new-version" class="section level3">
<h3><span class="header-section-number">2.1.5</span> Upgrading to a New Version</h3>
<p>If you perform an upgrade of RStudio Server and an existing version of the server is currently running, then the upgrade process will also ensure that active sessions are immediately migrated to the new version. This includes the following behavior:</p>
<ul>
<li>Running R sessions are suspended so that future interactions with the server automatically launch the updated R session binary</li>
<li>Currently connected browser clients are notified that a new version is available and automatically refresh themselves.</li>
<li>The core server binary is restarted</li>
</ul>
<p>To upgrade to a new version of RStudio Server you simply install the new version. For example on Debian/Ubuntu:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> gdebi <span class="kw">&lt;</span>rstudio-server-package.deb<span class="kw">&gt;</span></code></pre></div>
<p>For RedHat/CentOS:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> yum install --nogpgcheck <span class="kw">&lt;</span>rstudio-server-package.rpm<span class="kw">&gt;</span></code></pre></div>
<p>For openSUSE / SLES:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> zypper install <span class="kw">&lt;</span>rstudio-server-package.rpm<span class="kw">&gt;</span></code></pre></div>
</div>
</div>
<div id="administrative-dashboard" class="section level2">
<h2><span class="header-section-number">2.2</span> Administrative Dashboard</h2>
<p>RStudio Server includes an administrative dashboard with the following features:</p>
<ol style="list-style-type: decimal">
<li>Monitoring of active sessions and their CPU and memory utilization;</li>
<li>The ability to suspend, forcibly terminate, or assume control of any active session;</li>
<li>Historical usage data for individual server users (session time, memory, CPU, logs);</li>
<li>Historical server statistics (CPU, memory, active sessions, system load); and</li>
<li>Searchable server log (view all messages or just those for individual users)</li>
</ol>
<p>The dashboard can be an invaluable tool in understanding server usage and capacity as well as to diagnose and resolve problems.</p>
<div id="enabling-the-dashboard" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Enabling the Dashboard</h3>
<p>The administrative dashboard is accessed at the following URL:</p>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html">http://<span class="kw">&lt;server-address&gt;</span>/admin</code></pre></div>
<p>The administrative dashboard is disabled by default. To enable it you set the <code>admin-enabled</code> option. You can also specify that only users of certain group have access to the dashboard using the <code>admin-group</code> option. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode"><pre class="sourceCode ini"><code class="sourceCode ini"><span class="dt">admin-enabled</span><span class="ot">=</span><span class="dv">1</span>
<span class="dt">admin-group</span><span class="ot">=</span><span class="st">rstudio-admins</span></code></pre></div>
<p>Note that changes to the configuration will not take effect until the server is restarted.</p>
</div>
<div id="administrator-superusers" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Administrator Superusers</h3>
<p>You can further designate a certain user or group of users as administrative “superusers”. Superusers have the following additional privileges:</p>
<ol style="list-style-type: decimal">
<li>Suspend or terminate active sessions</li>
<li>Assume control of active sessions (e.g. for troubleshooting)</li>
<li>Login to RStudio as any other server user</li>
</ol>
<p>Administrative superusers do not have root privilege on the system, but rather have a narrow set of delegated privileges that are useful in managing and supporting the server. You can define the users with this privilege using the <code>admin-superuser-group</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode"><pre class="sourceCode ini"><code class="sourceCode ini"><span class="dt">admin-superuser-group</span><span class="ot">=</span><span class="st">rstudio-superuser-admins</span></code></pre></div>
<p>Changes to the configuration will not take effect until the server is restarted.</p>
<div id="google-accounts-restrictions" class="section level4">
<h4><span class="header-section-number">2.2.2.1</span> Google Accounts Restrictions</h4>
<p>Note that the ability to login as other users and assume control of existing sessions is not available if you are authenticating with [Google Accounts]. This is because Google authentication uses a different user-identity mechanism which isn’t compatible with the way that user session impersonation is implemented.</p>
<!--chapter:end:02-server-management-->
</div>
</div>
</div>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->

<script>
(function() {
  var href = window.location.pathname;
  href = href.substr(href.lastIndexOf('/') + 1);
  if (href === '') href = 'index.html';
  $('a[href^="' + href + location.hash + '"]').parent('li.chapter').first().addClass('active');
  var chaps = $('ul.summary').find('li.chapter');
  chaps.on('click', function(e) {
    e.stopPropagation();
    chaps.removeClass('active');
    $(this).addClass('active');
  });
})();

require(["gitbook"], function(gitbook) {
  var config = {
    "autocover": {},
    "highlight": {},
    "search": {
      "maxIndexSize": 1000000
    },
    "sharing": {
      "facebook": true,
      "twitter": true,
      "google": false,
      "weibo": false,
      "instapaper": false,
      "vk": false,
      "all": ["facebook", "google", "twitter", "weibo", "instapaper"]
    },
    "fontsettings": {
      "theme": "white",
      "family": "sans",
      "size": 2
    },
    "edit": {
      "link": /* bookdown:edit:link */,
      "text": /* bookdown:edit:text */
    }
  };
  gitbook.start(config);
});
</script>


</body>

</html>
